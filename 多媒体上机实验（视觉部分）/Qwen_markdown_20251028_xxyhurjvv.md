# 图像压缩编码实验手册

## 实验四：多媒体技术实验（二）——图像压缩编码

### 1. 实验目的
1. 了解数字图像压缩的基本概念及常用编码方式；
2. 熟悉 JPEG 编码与离散余弦变换（DCT）的原理；
3. 掌握编程实现 DCT 变换及 JPEG 编码的方法；
4. 对重建图像质量进行评价。

---

### 2. 实验原理

#### 2.1 图像压缩基本概念
- **目的**：节省存储空间、提高传输速度。
- **无损压缩**：不损失信息，压缩比低（如 Huffman、RLE、算术编码）。
- **有损压缩**：牺牲部分质量换取高压缩比（如 DCT、预测编码、子带编码等）。
- **混合编码**：结合多种技术（如 JPEG、MPEG、H.261）。

#### 2.2 JPEG 压缩编码原理
JPEG 是广泛使用的静态图像压缩标准，适用于灰度和彩色图像。其基本系统（顺序式模式）流程如下：
1. **正向离散余弦变换（FDCT）**：将图像从空间域转为频域；
2. **量化**：使用人眼视觉优化的加权函数对 DCT 系数进行量化；
3. **霍夫曼编码**：对量化后的系数进行可变长无损编码。

#### 2.3 离散余弦变换（DCT）原理
- DCT 是实数域正交变换，能量集中于低频（尤其是直流分量）；
- 二维 DCT 在一维基础上再次变换；
- 通常假设图像块为方阵（如 8×8），非方阵需补零处理。

二维 DCT 公式（N×N）：
$$
F(u,v) = \frac{1}{4} C(u) C(v) \sum_{x=0}^{N-1} \sum_{y=0}^{N-1} f(x,y) \cos\left[\frac{(2x+1)u\pi}{2N}\right] \cos\left[\frac{(2y+1)v\pi}{2N}\right]
$$
其中：
- $ C(0) = \frac{1}{\sqrt{2}},\ C(k) = 1\ (k>0) $

#### 2.4 图像质量评价

##### 客观保真度准则
- **均方误差（MSE）**：
  $$
  \text{MSE} = \frac{1}{MN} \sum_{i=0}^{M-1} \sum_{j=0}^{N-1} [f(i,j) - \hat{f}(i,j)]^2
  $$
- **均方根误差（RMSE）**：$ \sqrt{\text{MSE}} $
- **均方信噪比（SNR）**：
  $$
  \text{SNR} = 10 \log_{10} \left( \frac{\sum f^2}{\sum (f - \hat{f})^2} \right)
  $$

##### 主观保真度准则
- 评价等级：极好、良好、通过、勉强、低劣、不能用

---

### 3. 实验内容及步骤

> **注意**：DCT 变换部分必须自行实现，不可使用 MATLAB 或 OpenCV 自带函数。

#### 实验一：分块 DCT（8×8）
1. 将图像划分为多个 8×8 子块；
2. 对每个子块进行 DCT 变换；
3. 仅保留**直流分量**（即 (0,0) 系数），其余交流分量置零；
4. 对每个子块做逆 DCT，重建图像，观察效果。

#### 实验二：整图 DCT
1. 对整张图像（如 512×512）直接进行 DCT；
2. 仅保留直流分量，其余置零；
3. 逆 DCT 重建图像，与实验一结果对比。

#### 实验三：有限交流分量保留
1. 对整图做 DCT；
2. 保留直流分量 + 少量低频交流分量；
3. 逐步增加保留的交流分量数量，直到重建图像**可辨识**；
4. 与实验一结果比较。

#### 质量评价
对上述三个实验的重建图像，分别计算 MSE、RMSE、SNR，并进行主观评价。
# DCT图像压缩实验集合

本目录包含三个DCT图像压缩实验的完整实现和详细分析报告。

---

## 📂 目录结构

```
实验二/
├── 1/                                   # 实验一:8×8分块DCT
│   ├── dct_1.py                        # 主程序
│   ├── README.md                       # 详细说明
│   ├── requirements.txt                # 依赖包
│   ├── CHANGELOG.md                    # 改进记录
│   └── [输出文件]
│
├── 2/                                   # 实验二:整图DCT+DC
│   ├── dct_2.py                        # 主程序
│   └── [输出文件]
│
├── 3/                                   # 实验三:整图DCT+Top-K
│   ├── dct_3.py                        # 主程序
│   └── [输出文件]
│
├── 实验对比分析.md                      # 三个实验的详细对比
├── DCT图像压缩实验报告.md               # 完整实验报告(15000字)
└── README.md                            # 本文件
```

---

## 🎯 三个实验简介

### 实验一: 8×8分块DCT + 保留DC分量

**原理**: 将图像分成8×8小块,每块只保留DC分量

**结果**:
- 压缩比: 64:1
- PSNR: 30.01 dB
- 效果: 马赛克效果,但轮廓清晰

**适用**: JPEG压缩基础,实时处理

---

### 实验二: 整图DCT + 只保留DC分量

**原理**: 对整图做DCT,只保留一个全局DC系数

**结果**:
- 压缩比: 262,144:1
- PSNR: 13.35 dB
- 效果: 均匀灰色,完全不可辨识

**适用**: 理论研究,理解DC分量含义

---

### 实验三: 整图DCT + 保留前1000个最大系数

**原理**: 对整图做DCT,按幅值保留最大的1000个系数

**结果**:
- 压缩比: 262:1
- PSNR: 30.95 dB  (最高!)
- 效果: 模糊但可辨识,无块效应

**适用**: 追求极限压缩比,验证DCT能量集中特性

---

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install numpy pillow matplotlib
```

或者在任一实验目录下:
```bash
cd 1
pip install -r requirements.txt
```

### 2. 运行实验

```bash
# 实验一
cd 1
python dct_1.py

# 实验二
cd 2
python dct_2.py

# 实验三
cd 3
python dct_3.py
```

### 3. 查看结果

每个实验会:
- ✅ 在控制台输出处理进度和统计信息
- ✅ 显示可视化对比图表
- ✅ 保存处理后的图像
- ✅ 保存可视化结果PNG文件

---

## 📊 实验对比一览

| 指标 | 实验一 | 实验二 | 实验三 |
|------|--------|--------|--------|
| **DCT方式** | 8×8分块 | 整图512×512 | 整图512×512 |
| **保留系数** | 4,096 | 1 | 1,000 |
| **压缩比** | 64:1 | 262,144:1 | 262:1 |
| **PSNR** | 30.01 dB | 13.35 dB | 30.95 dB |
| **视觉质量** | ⭐⭐⭐ | ⭐ | ⭐⭐⭐⭐ |
| **块效应** | 严重 | 无 | 无 |
| **实用性** | ⭐⭐⭐⭐ | ⭐ | ⭐⭐⭐ |

---

## 📖 文档说明

### 实验对比分析.md
- 📄 约8000字
- 包含三个实验的详细对比
- 从原理、结果、优缺点多维度分析
- 包含大量数据表格和可视化说明

### DCT图像压缩实验报告.md
- 📄 约15000字完整实验报告
- 包含实验目的、原理、方案、实现、结果、分析
- 适合作为课程实验报告提交
- 格式规范,结构完整

---

## 🔬 核心技术

### 所有实验均使用手工实现的DCT

**未使用的库函数:**
- ❌ `cv2.dct()` - OpenCV的DCT
- ❌ `scipy.fftpack.dct()` - SciPy的DCT
- ❌ `cv2.resize()` - 实验2和3使用PIL替代

**自行实现的核心函数:**
```python
create_dct_matrix(n)      # 构建DCT变换矩阵
dct_2d(image)            # 2D DCT正变换
idct_2d(coeffs)          # 2D DCT逆变换
calculate_psnr()         # PSNR计算
```

### DCT数学公式

**变换矩阵:**
```
C[i,j] = α(i) * cos[(2j+1)iπ/(2n)]
α(i) = 1/√n (i=0), √(2/n) (i≠0)
```

**2D变换:**
```
正变换: F = C * f * C^T
逆变换: f = C^T * F * C
```

---

## 🎓 学习价值

### 理论收获
1. ✅ 深入理解DCT变换原理
2. ✅ 掌握图像压缩的基本流程
3. ✅ 验证DCT能量集中特性
4. ✅ 理解JPEG压缩的理论基础
5. ✅ 学习压缩比和质量的权衡

### 编程技能
1. ✅ NumPy矩阵运算
2. ✅ 图像处理流程
3. ✅ 数据可视化
4. ✅ 代码工程化
5. ✅ 科学实验方法

---

## 📈 实验结果展示

### 实验一: 马赛克效果
- 原图 → 8×8块状图像
- 保留整体结构和明暗
- 丢失所有细节

### 实验二: 均匀灰色
- 原图 → 单一灰度图像
- 灰度值约128(图像平均亮度)
- 完全不可辨识

### 实验三: 模糊但可识别
- 原图 → 低频模糊图像
- 轮廓清晰,细节丢失
- 无块效应,平滑

---

## 💡 核心发现

### 1. DCT能量集中
实验三证明:只用0.38%的系数就能达到30.95 dB的PSNR!

### 2. 分块DCT的价值
实验一展示了JPEG为什么选择8×8分块:
- 计算效率高
- 压缩性能好
- 便于硬件实现

### 3. 系数选择的重要性
- 固定位置DC: 简单但局限(实验一/二)
- Top-K选择: 自适应但复杂(实验三)

---

## 🔧 自定义参数

### 实验一

编辑 `dct_1.py` 的 `main()` 函数:
```python
# 修改图像路径
original, processed, stats = process_image("your_image.jpg")

# 修改分块大小
original, processed, stats = process_image("test_image.jpg", block_size=16)
```

### 实验三

编辑 `dct_3.py` 的 `main()` 函数:
```python
# 修改保留的系数数量
K_VALUE = 2000  # 默认1000
```

---

## ⚠️ 注意事项

1. **图像格式**: 支持jpg、png等常见格式
2. **图像大小**: 程序会自动调整为512×512
3. **运行时间**: 
   - 实验一: 约3-5秒
   - 实验二: 约10-15秒(整图DCT计算量大)
   - 实验三: 约15-20秒(包含排序)
4. **内存占用**: 
   - 实验一: 约50MB
   - 实验二/三: 约200MB

---

## 📚 扩展学习

### 进阶实验建议

1. **参数扫描**
   - 测试不同块大小(4×4, 16×16, 32×32)
   - 测试不同K值(100, 500, 2000, 5000)
   
2. **量化实验**
   - 实现JPEG量化表
   - 对比不同量化步长的效果

3. **其他变换**
   - 实现DWT(离散小波变换)
   - 对比DCT和DWT的性能

4. **完整JPEG**
   - 添加Zig-Zag扫描
   - 实现霍夫曼编码
   - 计算实际文件大小

### 推荐阅读

1. 《数字图像处理》 - Gonzalez
2. 《JPEG Still Image Data Compression Standard》
3. JPEG标准文档: ITU-T T.81

---

## 🐛 常见问题

### Q: 为什么实验二PSNR这么低?
A: 因为只保留了一个DC系数,整幅图像变成均匀灰色,完全失真。这个实验主要是理论研究价值。

### Q: 实验三为什么比实验一PSNR高?
A: 实验三保留了最重要的1000个系数(主要是低频),而实验一只保留了4096个DC分量(每个8×8块的平均值),信息量更少。

### Q: 如何选择哪个实验?
A: 
- 学习JPEG原理 → 实验一
- 理解DC分量 → 实验二
- 研究能量集中特性 → 实验三

### Q: 能用于实际压缩吗?
A: 这些是教学实验,缺少量化和熵编码,不能用于实际压缩。但理解了这些原理后,可以扩展实现完整的JPEG编码器。

---

## 📝 实验报告

### 如果需要提交实验报告

推荐使用:
- **简版**: 阅读 `实验对比分析.md`
- **详版**: 阅读 `DCT图像压缩实验报告.md`

报告包含:
- ✅ 实验目的和原理
- ✅ 实验方案设计
- ✅ 代码实现说明
- ✅ 实验结果和分析
- ✅ 结论和思考
- ✅ 参考资料

---

## 🎉 总结

这三个实验从不同角度展示了DCT在图像压缩中的应用:

**实验一** - 实用性最强,JPEG基础  
**实验二** - 理论意义,理解DC分量  
**实验三** - 压缩性能最优,验证能量集中特性

通过对比实验,深入理解了:
- DCT变换的数学原理
- 图像压缩的本质
- 压缩比和质量的权衡
- 分块处理的优缺点

**适合人群:**
- 学习图像处理的学生
- 研究图像压缩的研究者
- 对JPEG原理感兴趣的开发者

**学习建议:**
1. 先阅读实验报告理解原理
2. 运行三个实验观察结果
3. 阅读对比分析深入理解
4. 尝试修改参数做扩展实验

---

**实验完成时间**: 2025年10月28日  
**代码总行数**: ~1000行  
**文档总字数**: ~25000字  

祝学习愉快! 🚀

